<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crate Labeler</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸ“¦ Crate Labeler</h1>
        <p class="subtitle">
          Create printable labels for storage crates with voice or text input
        </p>
      </header>

      <div class="main-grid">
        <!-- Input Panel -->
        <div class="panel">
          <div class="panel-header">
            <div class="panel-icon">ğŸ“</div>
            <h2 class="panel-title">Crate Contents</h2>
          </div>

          <div class="input-row mb-8">
            <div class="form-group">
              <label for="binNamespace">Crate Name</label>
              <input
                type="text"
                id="binNamespace"
                placeholder="e.g., Audio Gear, Power Supplies"
              />
            </div>
            <div class="form-group" style="flex: 0 0 100px">
              <label for="binNumber">Number</label>
              <input type="number" id="binNumber" min="1" value="1" />
            </div>
          </div>

          <div class="form-group">
            <label for="contentsInput">Contents</label>
            <textarea
              id="contentsInput"
              placeholder="1 HDMI Cable 6ft
5 USB-C Adapter
2 Power Strip
3 Extension Cord 10ft

Enter each item on a new line..."
            ></textarea>
            <p class="hint">Format: [quantity] [item name] - one per line</p>
          </div>

          <!-- Voice Input Section -->
          <div class="voice-status">
            <span class="status-dot" id="voiceStatusDot"></span>
            <span id="voiceStatusText">Voice input ready</span>
          </div>

          <div class="voice-transcript" id="voiceTranscript">
            <em>Voice transcript will appear here...</em>
          </div>

          <div class="btn-group">
            <button class="btn btn-voice" id="voiceBtn">
              ğŸ¤ Start Voice Input
            </button>
            <button class="btn btn-secondary" id="clearVoiceBtn">
              Clear Transcript
            </button>
          </div>

          <p class="hint mt-16">
            ğŸ’¡ Say "next" to start a new line. Example: "5 HDMI cables, next, 3
            power strips"
          </p>

          <!-- Action Buttons -->
          <div class="btn-group mt-16">
            <button class="btn btn-primary" id="generateBtn">
              ğŸ·ï¸ Generate Label
            </button>
            <button class="btn btn-secondary" id="nextBinBtn">
              â¡ï¸ Next Crate
            </button>
            <button class="btn btn-danger" id="clearAllBtn">ğŸ—‘ï¸ Clear</button>
          </div>

          <!-- Saved Crates -->
          <div class="saved-bins">
            <div class="saved-bins-header">
              <h3 style="font-size: 1rem">Saved Crates</h3>
              <span class="counter-badge" id="binCount">0</span>
            </div>
            <div class="btn-group mb-8">
              <button class="btn btn-secondary" id="exportBinsBtn">
                ğŸ“¤ Export Crates
              </button>
              <button class="btn btn-secondary" id="importBinsBtn">
                ğŸ“¥ Import Crates
              </button>
              <input
                type="file"
                id="importFileInput"
                accept=".json"
                style="display: none"
              />
            </div>
            <div class="bins-list" id="binsList">
              <div class="empty-state">
                <div class="empty-state-icon">ğŸ“¦</div>
                <p>No crates saved yet</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Preview Panel -->
        <div class="panel print-panel">
          <div class="panel-header">
            <div class="panel-icon">ğŸ–¨ï¸</div>
            <h2 class="panel-title">Label Preview</h2>
          </div>

          <!-- Settings -->
          <div class="settings-row mb-8">
            <div class="form-group">
              <label for="barcodeUrl">Barcode Base URL</label>
              <input
                type="url"
                id="barcodeUrl"
                placeholder="https://example.com/crate/"
              />
              <p class="hint">Crate ID will be appended to this URL</p>
            </div>
            <div class="form-group">
              <label for="itemsPerPage">Items Per Label</label>
              <input
                type="number"
                id="itemsPerPage"
                min="1"
                max="20"
                value="10"
              />
            </div>
          </div>

          <div class="btn-group">
            <button class="btn btn-primary" id="printBtn">
              ğŸ–¨ï¸ Print Labels
            </button>
            <button class="btn btn-secondary" id="downloadPdfBtn">
              ğŸ“„ Download PDF
            </button>
          </div>

          <div class="label-preview-container mt-16">
            <div class="label-preview" id="labelPreview">
              <div class="empty-state" style="color: #666">
                <div class="empty-state-icon">ğŸ·ï¸</div>
                <p>Enter contents and click "Generate Label" to preview</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Import Modal -->
    <div class="modal-overlay" id="importModal">
      <div class="modal">
        <div class="modal-header">
          <h3>ğŸ“¥ Import Crates</h3>
          <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <div class="modal-body">
          <p id="importModalMessage">
            You have existing crates saved. How would you like to handle the
            import?
          </p>
          <div class="import-stats" id="importStats"></div>
        </div>
        <div class="modal-actions">
          <button class="btn btn-danger" id="modalOverwrite">
            ğŸ—‘ï¸ Clear & Replace
          </button>
          <button class="btn btn-primary" id="modalMerge">
            ğŸ”€ Merge (Rename Duplicates)
          </button>
          <button class="btn btn-secondary" id="modalCancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- External Libraries -->
    <script src="assets/js/qrcode.min.js"></script>
    <script src="assets/js/jspdf.umd.min.js"></script>
    <script src="assets/js/html2canvas.min.js"></script>

    <!-- Application Script -->
    <script src="assets/js/app.js"></script>
  </body>
</html>
